# –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –∑–º—ñ–Ω —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Å—É–¥–æ–≤–∏—Ö —Ä—ñ—à–µ–Ω—å

## –û–≥–ª—è–¥ —Å–∏—Å—Ç–µ–º–∏

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –º–æ–Ω—ñ—Ç–æ—Ä–∏—Ç—å –∑–º—ñ–Ω–∏ –≤ –±–∞–∑–∞—Ö –¥–∞–Ω–∏—Ö —Å—É–¥–æ–≤–∏—Ö —Ä—ñ—à–µ–Ω—å —Ç–∞ —ñ–Ω–≤–∞–ª—ñ–¥—É—î –∫–µ—à —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø—Ä–∏ –≤–∏—è–≤–ª–µ–Ω–Ω—ñ –∑–Ω–∞—á—É—â–∏—Ö –∑–º—ñ–Ω. –¶–µ –∑–∞–±–µ–∑–ø–µ—á—É—î –∞–∫—Ç—É–∞–ª—å–Ω—ñ—Å—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –Ω–∞ –≤–µ–±-—Å—Ç–æ—Ä—ñ–Ω—Ü—ñ –±–µ–∑ –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ—Å—Ç—ñ —Ä—É—á–Ω–æ–≥–æ –≤—Ç—Ä—É—á–∞–Ω–Ω—è.

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ —Å–∏—Å—Ç–µ–º–∏

### 1. –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö
- **–¢–∞–±–ª–∏—Ü—è –ª–æ–≥—É–≤–∞–Ω–Ω—è**: `bankruptcy_database_changes` - –∑–±–µ—Ä—ñ–≥–∞—î –≤—Å—ñ –∑–º—ñ–Ω–∏ –≤ —Ç–∞–±–ª–∏—Ü—è—Ö —Å—É–¥–æ–≤–∏—Ö —Ä—ñ—à–µ–Ω—å
- **–¢—Ä–∏–≥–µ—Ä-—Ñ—É–Ω–∫—Ü—ñ—è**: `log_court_decisions_changes()` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–ø–∏—Å—É—î –∑–º—ñ–Ω–∏
- **–¢—Ä–∏–≥–µ—Ä–∏ –Ω–∞ —Ç–∞–±–ª–∏—Ü—è—Ö**: –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ñ –Ω–∞ –≤—Å—ñ 19 —Ç–∞–±–ª–∏—Ü—å `court_decisions_*` (2007-2025)

### 2. Django –∫–æ–º–∞–Ω–¥–∏
- **`auto_update_statistics`**: –ü–æ—Å—Ç—ñ–π–Ω–∏–π –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ —ñ–Ω–≤–∞–ª—ñ–¥–∞—Ü—ñ—è –∫–µ—à—É
- **`monitor_csv_changes`**: –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –∑–º—ñ–Ω —É CSV —Ñ–∞–π–ª–∞—Ö
- **`invalidate_cache`**: –†—É—á–Ω–∞ —ñ–Ω–≤–∞–ª—ñ–¥–∞—Ü—ñ—è –∫–µ—à—É
- **`update_court_statistics`**: –†—É—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

### 3. Systemd —Å–µ—Ä–≤—ñ—Å
- **–§–∞–π–ª**: `analiz-court-monitor.service`
- **–°–∫—Ä–∏–ø—Ç —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è**: `manage_monitor_service.sh`
- **–†–µ–∂–∏–º —Ä–æ–±–æ—Ç–∏**: –ü–æ—Å—Ç—ñ–π–Ω–∞ —Ä–æ–±–æ—Ç–∞ —É —Ñ–æ–Ω–æ–≤–æ–º—É —Ä–µ–∂–∏–º—ñ

## –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ç–∞ –∑–∞–ø—É—Å–∫

### 1. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Å–µ—Ä–≤—ñ—Å—É

```bash
# –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ —Å–µ—Ä–≤—ñ—Å —Ç–∞ —É–≤—ñ–º–∫–Ω—É—Ç–∏ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
./manage_monitor_service.sh install

# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–µ—Ä–≤—ñ—Å
./manage_monitor_service.sh start

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ç–∞—Ç—É—Å
./manage_monitor_service.sh status
```

### 2. –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Å–µ—Ä–≤—ñ—Å–æ–º

```bash
# –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –ª–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ
./manage_monitor_service.sh logs

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–µ—Ä–≤—ñ—Å
./manage_monitor_service.sh restart

# –ó—É–ø–∏–Ω–∏—Ç–∏ —Å–µ—Ä–≤—ñ—Å
./manage_monitor_service.sh stop

# –í–∏–¥–∞–ª–∏—Ç–∏ —Å–µ—Ä–≤—ñ—Å –ø–æ–≤–Ω—ñ—Å—Ç—é
./manage_monitor_service.sh uninstall
```

### 3. –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Å–∏—Å—Ç–µ–º–∏

```bash
# –¢–µ—Å—Ç–æ–≤–∏–π –∑–∞–ø—É—Å–∫ (–≤–∏–∫–æ–Ω–∞—Ç–∏ –æ–¥–∏–Ω —Ä–∞–∑)
./manage_monitor_service.sh test

# –ê–±–æ –Ω–∞–ø—Ä—è–º—É:
python manage.py auto_update_statistics --run-once --verbose
```

## –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É

### –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º
- **–Ü–Ω—Ç–µ—Ä–≤–∞–ª –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏**: 300 —Å–µ–∫—É–Ω–¥ (5 —Ö–≤–∏–ª–∏–Ω)
- **–ú—ñ–Ω—ñ–º—É–º –∑–º—ñ–Ω –¥–ª—è —Ç—Ä–∏–≥–µ—Ä–∞**: 100 –∑–∞–ø–∏—Å—ñ–≤
- **–†–µ–∂–∏–º –ª–æ–≥—É–≤–∞–Ω–Ω—è**: –î–µ—Ç–∞–ª—å–Ω–∏–π (verbose)

### –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤

```bash
# –ó–º—ñ–Ω–∏—Ç–∏ —ñ–Ω—Ç–µ—Ä–≤–∞–ª –Ω–∞ 2 —Ö–≤–∏–ª–∏–Ω–∏ —Ç–∞ –ø–æ—Ä—ñ–≥ –Ω–∞ 50 –∑–º—ñ–Ω
python manage.py auto_update_statistics --check-interval=120 --min-changes=50 --verbose

# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –±–µ–∑ –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –≤–∏–≤–æ–¥—É
python manage.py auto_update_statistics --check-interval=300 --min-changes=100
```

## –Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î

### 1. –í—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –∑–º—ñ–Ω
1. **PostgreSQL —Ç—Ä–∏–≥–µ—Ä–∏** –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–ø–∏—Å—É—é—Ç—å –≤—Å—ñ INSERT/UPDATE/DELETE –æ–ø–µ—Ä–∞—Ü—ñ—ó –≤ —Ç–∞–±–ª–∏—Ü—è—Ö —Å—É–¥–æ–≤–∏—Ö —Ä—ñ—à–µ–Ω—å
2. **–¢–∞–±–ª–∏—Ü—è –ª–æ–≥—É–≤–∞–Ω–Ω—è** –∑–±–µ—Ä—ñ–≥–∞—î —Ç–∏–ø –æ–ø–µ—Ä–∞—Ü—ñ—ó, –Ω–∞–∑–≤—É —Ç–∞–±–ª–∏—Ü—ñ, —á–∞—Å –∑–º—ñ–Ω–∏ —Ç–∞ ID –∑–∞–ø–∏—Å—É
3. **Django –∫–æ–º–∞–Ω–¥–∞** –∫–æ–∂–Ω—ñ 5 —Ö–≤–∏–ª–∏–Ω –ø–µ—Ä–µ–≤—ñ—Ä—è—î –∫—ñ–ª—å–∫—ñ—Å—Ç—å –Ω–æ–≤–∏—Ö –∑–º—ñ–Ω

### 2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ —ñ–Ω–≤–∞–ª—ñ–¥–∞—Ü—ñ—è
1. –Ø–∫—â–æ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∑–º—ñ–Ω –ø–µ—Ä–µ–≤–∏—â—É—î –ø–æ—Ä—ñ–≥ (100 –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º):
   - –í—Å—ñ –∑–∞–ø–∏—Å–∏ –≤ –∫–µ—à—ñ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ–º—ñ—á–∞—é—Ç—å—Å—è —è–∫ –Ω–µ–¥—ñ–π—Å–Ω—ñ (`is_valid=False`)
   - –ü—Ä–∏ –Ω–∞—Å—Ç—É–ø–Ω–æ–º—É –≤—ñ–¥–≤—ñ–¥—É–≤–∞–Ω–Ω—ñ –≤–µ–±-—Å—Ç–æ—Ä—ñ–Ω–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–µ—Ä–µ—Ä–∞—Ö—É—î—Ç—å—Å—è –∑–∞–Ω–æ–≤–æ
   - –ù–æ–≤–∏–π –∫–µ—à –±—É–¥–µ –∞–∫—Ç—É–∞–ª—å–Ω–∏–º –Ω–∞ –º–æ–º–µ–Ω—Ç —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É

### 3. –õ–æ–≥—É–≤–∞–Ω–Ω—è —Ç–∞ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥
- –í—Å—ñ –¥—ñ—ó –∑–∞–ø–∏—Å—É—é—Ç—å—Å—è –≤ Django –ª–æ–≥–∏ —Ç–∞ systemd journal
- –î–µ—Ç–∞–ª—å–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ —Ç–∏–ø–∏ –∑–º—ñ–Ω (INSERT/UPDATE/DELETE)
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ç–∞–±–ª–∏—Ü—è—Ö, —â–æ –∑–∞–∑–Ω–∞–ª–∏ –∑–º—ñ–Ω

## –ü–µ—Ä–µ–≤–∞–≥–∏ —Å–∏—Å—Ç–µ–º–∏

- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ—Å—Ç—å**: –ü—Ä–∞—Ü—é—î –±–µ–∑ –≤—Ç—Ä—É—á–∞–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- **–ï—Ñ–µ–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å**: –Ü–Ω–≤–∞–ª—ñ–¥—É—î –∫–µ—à —Ç—ñ–ª—å–∫–∏ –ø—Ä–∏ –∑–Ω–∞—á—É—â–∏—Ö –∑–º—ñ–Ω–∞—Ö
- **–ì–Ω—É—á–∫—ñ—Å—Ç—å**: –ù–∞–ª–∞—à—Ç–æ–≤—É–≤–∞–Ω—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É
- **–ù–∞–¥—ñ–π–Ω—ñ—Å—Ç—å**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –ø–æ–º–∏–ª–∫–∞—Ö
- **–ü—Ä–æ–∑–æ—Ä—ñ—Å—Ç—å**: –î–µ—Ç–∞–ª—å–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è –≤—Å—ñ—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π

## –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —Å–∏—Å—Ç–µ–º–∏

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å—É
```bash
# –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤—ñ—Å—É
systemctl status analiz-court-monitor

# –û—Å—Ç–∞–Ω–Ω—ñ –ª–æ–≥–∏
journalctl -u analiz-court-monitor -n 50

# –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ
journalctl -u analiz-court-monitor -f
```

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–µ—à—É
```bash
# –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –ø–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω –∫–µ—à—É —á–µ—Ä–µ–∑ Django shell
python manage.py shell
```

```python
from bankruptcy.models import CourtDecisionStatistics
from django.utils import timezone

# –ö—ñ–ª—å–∫—ñ—Å—Ç—å –≤–∞–ª—ñ–¥–Ω–∏—Ö –∑–∞–ø–∏—Å—ñ–≤ –∫–µ—à—É
valid_cache = CourtDecisionStatistics.objects.filter(is_valid=True).count()
total_cache = CourtDecisionStatistics.objects.count()
print(f"–í–∞–ª—ñ–¥–Ω–∏–π –∫–µ—à: {valid_cache}/{total_cache}")

# –û—Å—Ç–∞–Ω–Ω—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
last_update = CourtDecisionStatistics.objects.filter(is_valid=True).order_by('-updated_at').first()
if last_update:
    print(f"–û—Å—Ç–∞–Ω–Ω—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è: {last_update.updated_at}")
```

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–º—ñ–Ω —É –±–∞–∑—ñ
```bash
# –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –æ—Å—Ç–∞–Ω–Ω—ñ –∑–º—ñ–Ω–∏ —á–µ—Ä–µ–∑ psql
PGPASSWORD=analiz_password psql -h localhost -U analiz_user -d analiz_klientiv -c "
SELECT 
    table_name,
    operation_type,
    COUNT(*) as count,
    MAX(change_timestamp) as last_change
FROM bankruptcy_database_changes 
WHERE change_timestamp > NOW() - INTERVAL '1 day'
GROUP BY table_name, operation_type
ORDER BY last_change DESC
LIMIT 10;"
```

## –£—Å—É–Ω–µ–Ω–Ω—è –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –°–µ—Ä–≤—ñ—Å –Ω–µ –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø—É –¥–æ —Ñ–∞–π–ª—ñ–≤ –ø—Ä–æ—î–∫—Ç—É
2. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ PostgreSQL –∑–∞–ø—É—â–µ–Ω–æ
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ñ—Å—Ç—å —à–ª—è—Ö—ñ–≤ —É —Å–ª—É–∂–±–æ–≤–æ–º—É —Ñ–∞–π–ª—ñ

### –ö–µ—à –Ω–µ —ñ–Ω–≤–∞–ª—ñ–¥—É—î—Ç—å—Å—è
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ –ø—Ä–∞—Ü—é—é—Ç—å —Ç—Ä–∏–≥–µ—Ä–∏ –≤ –±–∞–∑—ñ –¥–∞–Ω–∏—Ö
2. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ —Ç–∞–±–ª–∏—Ü—è `bankruptcy_database_changes` –∑–∞–ø–æ–≤–Ω—é—î—Ç—å—Å—è
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø–æ—Ä—ñ–≥ –∑–º—ñ–Ω (`--min-changes`)

### –í–µ–ª–∏–∫–µ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
1. –ó–±—ñ–ª—å—à—Ç–µ —ñ–Ω—Ç–µ—Ä–≤–∞–ª –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ (`--check-interval`)
2. –ü—ñ–¥–≤–∏—â—Ç–µ –ø–æ—Ä—ñ–≥ –∑–º—ñ–Ω (`--min-changes`)
3. –í–∏–º–∫–Ω—ñ—Ç—å –¥–µ—Ç–∞–ª—å–Ω–∏–π —Ä–µ–∂–∏–º (–≤–∏–¥–∞–ª—ñ—Ç—å `--verbose`)

–°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä –ø–æ–≤–Ω—ñ—Å—Ç—é –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ—ó —Ä–æ–±–æ—Ç–∏! üöÄ